<div class="app-container">
<!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <div class="logo-section">
        <h1>LoL Matchmaking</h1>
        <span class="version">v1.0.0</span>
      </div>

      <div class="user-section" *ngIf="currentPlayer">
        <div class="player-info">
          <img [src]="'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/profileicon/' + currentPlayer.profileIconId + '.png'"
               alt="Profile Icon" class="profile-icon">
          <div class="player-details">
            <span class="summoner-name">{{ currentPlayer.summonerName }}</span>
            <span class="mmr">{{ currentPlayer.currentMMR }} MMR</span>
            <span class="rank">{{ currentPlayer.rank?.display }}</span>
          </div>
        </div>
      </div>

      <div class="window-controls" *ngIf="isElectron">
        <button class="control-btn minimize" (click)="minimizeWindow()">‚àí</button>
        <button class="control-btn maximize" (click)="maximizeWindow()">‚ñ°</button>
        <button class="control-btn close" (click)="closeWindow()">√ó</button>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="app-nav">
    <button class="nav-btn"
            [class.active]="currentView === 'dashboard'"
            (click)="setCurrentView('dashboard')">
      <i class="icon-dashboard"></i>
      Dashboard
    </button>

    <button class="nav-btn"
            [class.active]="currentView === 'queue'"
            (click)="setCurrentView('queue')">
      <i class="icon-queue"></i>
      Fila
      <span class="queue-badge" *ngIf="queueStatus.playersInQueue > 0">
        {{ queueStatus.playersInQueue }}
      </span>
    </button>

    <button class="nav-btn"
            [class.active]="currentView === 'history'"
            (click)="setCurrentView('history')">
      <i class="icon-history"></i>
      Hist√≥rico
    </button>

    <button class="nav-btn"
            [class.active]="currentView === 'settings'"
            (click)="setCurrentView('settings')">
      <i class="icon-settings"></i>
      Configura√ß√µes
    </button>
  </nav>

  <!-- Main Content -->
  <main class="app-main">
    <div class="content-container">
      <!-- Dashboard -->
      <app-dashboard *ngIf="currentView === 'dashboard'"
                     [player]="currentPlayer"
                     [queueStatus]="queueStatus">
      </app-dashboard>

      <!-- Queue -->
      <app-queue *ngIf="currentView === 'queue'"
                 [isInQueue]="isInQueue"
                 [queueStatus]="queueStatus"
                 [currentPlayer]="currentPlayer"
                 (joinQueue)="joinQueue()"
                 (leaveQueue)="leaveQueue()">
      </app-queue>

      <!-- Match History -->
      <app-match-history *ngIf="currentView === 'history'"
                         [player]="currentPlayer">
      </app-match-history>

      <!-- Settings -->
      <div *ngIf="currentView === 'settings'" class="settings-view">
        <h2>Configura√ß√µes</h2>

        <div class="settings-section">
          <h3>Conta</h3>
          <div class="form-group">
            <label for="summonerName">Nome do Invocador:</label>
            <input type="text"
                   id="summonerName"
                   [(ngModel)]="settingsForm.summonerName"
                   placeholder="Digite seu nome no LoL">
          </div>

          <div class="form-group">
            <label for="region">Regi√£o:</label>
            <select id="region" [(ngModel)]="settingsForm.region">
              <option value="br1">Brasil</option>
              <option value="na1">Am√©rica do Norte</option>
              <option value="euw1">Europa Oeste</option>
              <option value="eun1">Europa Norte/Leste</option>
              <option value="kr">Coreia</option>
              <option value="jp1">Jap√£o</option>
              <option value="la1">Am√©rica Latina Norte</option>
              <option value="la2">Am√©rica Latina Sul</option>
              <option value="oc1">Oceania</option>
              <option value="tr1">Turquia</option>
              <option value="ru">R√∫ssia</option>
            </select>
          </div>

          <button class="btn btn-primary" (click)="savePlayerSettings()">
            Salvar Configura√ß√µes
          </button>
        </div>

        <div class="settings-section">
          <h3>Riot API</h3>
          <div class="form-group">
            <label for="riotApiKey">Chave da API (opcional):</label>
            <input type="password"
                   id="riotApiKey"
                   [(ngModel)]="settingsForm.riotApiKey"
                   placeholder="Sua chave de desenvolvedor da Riot">
            <small>Para funcionalidades avan√ßadas como importar dados do rank atual</small>
          </div>
        </div>

        <div class="settings-section">
          <h3>Cliente LoL</h3>
          <div class="lcu-status">
            <span class="status-indicator" [class.connected]="lcuStatus.isConnected"></span>
            <span>{{ lcuStatus.isConnected ? 'Conectado' : 'Desconectado' }}</span>
            <button class="btn btn-secondary" (click)="refreshLCUConnection()">
              Reconectar
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Status Bar -->
  <footer class="app-footer">
    <div class="status-items">
      <div class="status-item">
        <span class="status-indicator" [class.connected]="isConnected"></span>
        <span>{{ isConnected ? 'Online' : 'Offline' }}</span>
      </div>

      <div class="status-item" *ngIf="queueStatus.playersInQueue > 0">
        <i class="icon-users"></i>
        <span>{{ queueStatus.playersInQueue }} na fila</span>
      </div>

      <div class="status-item" *ngIf="lcuStatus.gameflowPhase && lcuStatus.gameflowPhase !== 'None'">
        <i class="icon-game"></i>
        <span>{{ getGameflowDisplayText(lcuStatus.gameflowPhase) }}</span>
      </div>
    </div>
  </footer>

  <!-- Notifications -->
  <div class="notifications" *ngIf="notifications.length > 0">
    <div class="notification"
         *ngFor="let notification of notifications; trackBy: trackNotification"
         [class]="'notification-' + notification.type">
      <div class="notification-content">
        <strong>{{ notification.title }}</strong>
        <p>{{ notification.message }}</p>
      </div>
      <button class="notification-close" (click)="dismissNotification(notification.id)">√ó</button>
    </div>
  </div>

  <!-- Match Found Modal -->
  <div class="modal-overlay" *ngIf="matchFound">
    <div class="modal match-found-modal">
      <h2>üéâ Partida Encontrada!</h2>

      <div class="teams-display">
        <div class="team team-blue">
          <h3>Time Azul ({{ matchFound.averageMMR1 }} MMR)</h3>
          <div class="team-players">
            <div class="player" *ngFor="let player of matchFound.team1">
              <span class="player-name">{{ player.summonerName }}</span>
              <span class="player-mmr">{{ player.mmr }} MMR</span>
            </div>
          </div>
        </div>

        <div class="vs-divider">VS</div>

        <div class="team team-red">
          <h3>Time Vermelho ({{ matchFound.averageMMR2 }} MMR)</h3>
          <div class="team-players">
            <div class="player" *ngFor="let player of matchFound.team2">
              <span class="player-name">{{ player.summonerName }}</span>
              <span class="player-mmr">{{ player.mmr }} MMR</span>
            </div>
          </div>
        </div>
      </div>

      <div class="your-team">
        <p>Voc√™ est√° no <strong>Time {{ matchFound.yourTeam === 1 ? 'Azul' : 'Vermelho' }}</strong></p>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" (click)="acceptMatch()">
          Aceitar Partida
        </button>
        <button class="btn btn-secondary" (click)="declineMatch()">
          Recusar        </button>
      </div>
    </div>
  </div>
</div>
